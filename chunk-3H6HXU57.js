import{$ as F,A as l,Ba as x,Ca as c,D as p,Da as Y,Ea as Z,G as f,Ga as $,Ha as K,Ia as Q,Ja as U,K as B,Ka as X,La as ee,M as v,O as S,P as E,Q as z,R as I,S as N,T as h,U as d,V as u,W as A,X as R,Y as C,Z as k,_ as W,ca as _,da as H,i as b,ja as V,ka as j,ma as q,oa as J,s as g,u as P,v as O,w as T,wa as G}from"./chunk-JA5E75BH.js";var te=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-card-fill-empty"]],decls:1,vars:0,consts:[[1,"filling-empty"]],template:function(o,i){o&1&&u(0,"div",0)},styles:[".filling-empty[_ngcontent-%COMP%]{width:328px;height:0}"]})};var oe=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-card-skeleton"]],decls:1,vars:0,consts:[[1,"card"]],template:function(o,i){o&1&&u(0,"div",0)},styles:[".card[_ngcontent-%COMP%]{width:328px;padding:16px 16px 40px;min-height:200px;border-radius:16px;position:relative;box-shadow:0 0 12px #00000026;background-color:#ddd}"]})};var M="favorites",ae=9,ie={resource:"books",isLoading:!1,emptySpace:[...Array(ae).keys()],books:[],houses:[],characters:[],booksData:[],housesData:[],charactersData:[]},re=Z({providedIn:"root"},Q(ie),K((e,n=g(U),o=g(ee),i=g(X))=>({updateFavorites(r){let t=r.split("/");if(t.length!=2){console.error("[updateFavorites] invalid input, input:",r);return}let[a,s]=t;if(a!=="books"&&a!=="houses"&&a!=="characters"){console.error("[updateFavorites] invalid resource, resource:",a);return}this._shouldAdd(a,+s)?this._addFavorites(a,+s):this._removeFavorites(a,+s)},isFavored(r,t){return r==="books"||r==="houses"||r==="characters"?!!e[r]()?.find(a=>a===+t):!1},getDetailsPath(r){let t=r.split("anapioficeandfire.com/api");return t.length<2?"":t[t.length-1]},getFavoritesBooks(){let r=e.books().map(t=>n.getById(t));return b(r).pipe(x({next:t=>{c(e,{booksData:t,isLoading:!1})},error:t=>{c(e,{isLoading:!1}),console.error(t)},finalize:()=>c(e,{isLoading:!1})}))},getFavoritesHouses(){let r=e.houses().map(t=>o.getById(t));return b(r).pipe(x({next:t=>{c(e,{housesData:t,isLoading:!1})},error:t=>{c(e,{isLoading:!1}),console.error(t)},finalize:()=>c(e,{isLoading:!1})}))},getFavoritesCharacters(){let r=e.characters().map(t=>i.getById(t));return b(r).pipe(x({next:t=>{c(e,{charactersData:t,isLoading:!1})},error:t=>{c(e,{isLoading:!1}),console.error(t)},finalize:()=>c(e,{isLoading:!1})}))},_addFavorites(r,t){c(e,a=>r==="books"?{books:[...a.books,t]}:r==="houses"?{houses:[...a.houses,t]}:r==="characters"?{characters:[...a.characters,t]}:a)},_removeFavorites(r,t){c(e,a=>r==="books"?{books:[...a.books].filter(s=>s!==t),booksData:[...a.booksData].filter(s=>{let m=s.url.split("/books/");return+m[m.length-1]!==t})}:r==="houses"?{houses:[...a.houses,t].filter(s=>s!==t),housesData:[...a.housesData].filter(s=>{let m=s.url.split("/houses/");return+m[m.length-1]!==t})}:r==="characters"?{characters:[...a.characters,t].filter(s=>s!==t),charactersData:[...a.charactersData].filter(s=>{let m=s.url.split("/characters/");return+m[m.length-1]!==t})}:a)},_shouldAdd(r,t){return r==="books"||r==="houses"||r==="characters"?!e[r]()?.find(a=>a===+t):(console.error("[_shouldAdd] invalid resource, input:",r),!1)}})),$({onInit(e){let n=localStorage.getItem(M);if(n){let o=JSON.parse(n);c(e,{books:o.books||[],houses:o.houses||[],characters:o.characters||[]})}else{let o={books:[],houses:[],characters:[]};localStorage.setItem(M,JSON.stringify(o)),c(e,{books:[],houses:[],characters:[]})}j(()=>{let o=Y(e),i={books:o.books,houses:o.houses,characters:o.characters};localStorage.setItem(M,JSON.stringify(i))})}}));var se=e=>({path:!0,"path--checked":e}),y=class e{checked=l(!1);static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-svg-star"]],inputs:{checked:[1,"checked"]},decls:2,vars:3,consts:[["xmlns","http://www.w3.org/2000/svg","width","100%","height","100%","viewBox","0 0 24 24","fill","none",3,"ngClass"],["d","M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(o,i){o&1&&(T(),h(0,"svg",0),u(1,"path",1),d()),o&2&&v("ngClass",_(1,se,i.checked()))},dependencies:[J,q],styles:[".path[_ngcontent-%COMP%]{stroke:#101828;fill:#fff}.path[_ngcontent-%COMP%]:hover{stroke:#feb273;fill:#fff}.path--checked[_ngcontent-%COMP%], .path--checked[_ngcontent-%COMP%]:hover{stroke:#feb273;fill:#feb273}"]})};var ce=(e,n)=>({fontSize:e,minWidth:n}),le=e=>({fontSize:e});function pe(e,n){if(e&1&&(h(0,"div",4)(1,"p",6),k(2),d(),h(3,"p",7),k(4),d()()),e&2){let o=n.$implicit,i=C();p(),S(H(6,ce,i.fontSize(),i.labelMinWidth())),p(),F(" ",o.key," "),p(),S(_(9,le,i.fontSize())),p(),F(" ",o.val," ")}}function de(e,n){if(e&1){let o=A();h(0,"div",8),R("click",function(r){P(o);let t=C();return O(t.onFavClick(r))}),u(1,"app-com-svg-star",9),d()}if(e&2){let o=C();p(),v("checked",o.favoritesStore.isFavored(o.metaData().resource,o.metaData().resourceId))}}var ne=class e{favoritesStore=g(re);card=l();header=l();redirectTo=l();fontSize=l("18px");labelMinWidth=l("0");disableFavorite=l(!1);metaData=V(()=>{if(!this.redirectTo())return{resource:"",resourceId:0};let n=this.redirectTo()?.split("/")||[];return n.length!==3?{resource:"",resourceId:0}:{resource:n[1],resourceId:+n[2]}});onFavClick(n){if(n.stopPropagation(),n.preventDefault(),!this.redirectTo()){console.error("redirectTo is empty");return}let o=this.redirectTo()?.replace("/","");if(!o){console.error("onFavClick: path is not valid, input: ",this.redirectTo());return}this.favoritesStore.updateFavorites(o)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-card-basic"]],inputs:{card:[1,"card"],header:[1,"header"],redirectTo:[1,"redirectTo"],fontSize:[1,"fontSize"],labelMinWidth:[1,"labelMinWidth"],disableFavorite:[1,"disableFavorite"]},decls:9,vars:3,consts:[[1,"link",3,"routerLink"],[1,"card"],[1,"card__header"],[1,"card__data"],[1,"card__row"],[1,"fav"],[1,"card__label"],[1,"card__value"],[1,"fav",3,"click"],[3,"checked"]],template:function(o,i){o&1&&(h(0,"a",0)(1,"div",1)(2,"div")(3,"h3",2),k(4),d(),h(5,"div",3),I(6,pe,5,11,"div",4,z),d()(),B(8,de,2,1,"div",5),d()()),o&2&&(v("routerLink",i.redirectTo()),p(4),W(i.header()),p(2),N(i.card()),p(2),E(i.disableFavorite()?-1:8))},dependencies:[G,y],styles:[".link[_ngcontent-%COMP%]{text-decoration:none;color:#000;-webkit-user-select:text;user-select:text}.card[_ngcontent-%COMP%]{width:328px;padding:20px;min-height:200px;border-radius:16px;position:relative;cursor:pointer;box-shadow:0 0 12px #00000026}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000}.card__data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.card__row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.card__label[_ngcontent-%COMP%], .card__value[_ngcontent-%COMP%]{font-size:18px}.card__header[_ngcontent-%COMP%]{font-weight:600;font-size:24px;text-align:center;margin-bottom:16px;min-height:56px}.fav[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:0;right:0;width:36px;height:36px}"]})};export{y as a,re as b,ne as c,te as d,oe as e};
