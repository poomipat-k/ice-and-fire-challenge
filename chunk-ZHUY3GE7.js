import{$ as L,A as l,Ba as y,Ca as a,D as p,Da as Z,Ea as $,G as f,Ga as K,Ha as Q,Ia as U,Ja as X,K as E,Ka as ee,La as te,M as v,O as F,P as z,Q as I,R as N,S as A,T as u,U as d,V as h,W as R,X as W,Y as k,Z as _,_ as H,ca as x,da as V,i as b,ja as j,ka as q,ma as J,o as C,oa as G,s as g,u as O,v as T,w as B,wa as Y}from"./chunk-JA5E75BH.js";var oe=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-card-fill-empty"]],decls:1,vars:0,consts:[[1,"filling-empty"]],template:function(o,s){o&1&&h(0,"div",0)},styles:[".filling-empty[_ngcontent-%COMP%]{width:328px;height:0}"]})};var re=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-card-skeleton"]],decls:1,vars:0,consts:[[1,"card"]],template:function(o,s){o&1&&h(0,"div",0)},styles:[".card[_ngcontent-%COMP%]{width:328px;padding:16px 16px 40px;min-height:200px;border-radius:16px;position:relative;box-shadow:0 0 12px #00000026;background-color:#ddd}"]})};var w="favorites",ae=9,se={resource:"books",isLoading:!1,emptySpace:[...Array(ae).keys()],books:[],houses:[],characters:[],booksData:[],housesData:[],charactersData:[]},ne=$({providedIn:"root"},U(se),Q((e,n=g(X),o=g(te),s=g(ee))=>({updateFavorites(r){let t=r.split("/");if(t.length!=2){console.error("[updateFavorites] invalid input, input:",r);return}let[i,c]=t;if(i!=="books"&&i!=="houses"&&i!=="characters"){console.error("[updateFavorites] invalid resource, resource:",i);return}this._shouldAdd(i,+c)?this._addFavorites(i,+c):this._removeFavorites(i,+c)},isFavored(r,t){return r==="books"||r==="houses"||r==="characters"?!!e[r]()?.find(i=>i===+t):!1},getDetailsPath(r){let t=r.split("anapioficeandfire.com/api");return t.length<2?"":t[t.length-1]},getFavoritesBooks(){a(e,{isLoading:!0});let r=e.books().map(t=>n.getById(t));return b(r).pipe(C(()=>a(e,{isLoading:!0})),y({next:t=>{a(e,{booksData:t,isLoading:!1})},error:t=>{a(e,{isLoading:!1}),console.error(t)},finalize:()=>a(e,{isLoading:!1})}))},getFavoritesHouses(){a(e,{isLoading:!0});let r=e.houses().map(t=>o.getById(t));return b(r).pipe(C(()=>a(e,{isLoading:!0})),y({next:t=>{a(e,{housesData:t,isLoading:!1})},error:t=>{a(e,{isLoading:!1}),console.error(t)},finalize:()=>a(e,{isLoading:!1})}))},getFavoritesCharacters(){a(e,{isLoading:!0});let r=e.characters().map(t=>s.getById(t));return b(r).pipe(C(()=>a(e,{isLoading:!0})),y({next:t=>{a(e,{charactersData:t,isLoading:!1})},error:t=>{a(e,{isLoading:!1}),console.error(t)},finalize:()=>a(e,{isLoading:!1})}))},_addFavorites(r,t){a(e,i=>r==="books"?{books:[...i.books,t]}:r==="houses"?{houses:[...i.houses,t]}:r==="characters"?{characters:[...i.characters,t]}:i)},_removeFavorites(r,t){a(e,i=>r==="books"?{books:[...i.books].filter(c=>c!==t),booksData:[...i.booksData].filter(c=>{let m=c.url.split("/books/");return+m[m.length-1]!==t})}:r==="houses"?{houses:[...i.houses,t].filter(c=>c!==t),housesData:[...i.housesData].filter(c=>{let m=c.url.split("/houses/");return+m[m.length-1]!==t})}:r==="characters"?{characters:[...i.characters,t].filter(c=>c!==t),charactersData:[...i.charactersData].filter(c=>{let m=c.url.split("/characters/");return+m[m.length-1]!==t})}:i)},_shouldAdd(r,t){return r==="books"||r==="houses"||r==="characters"?!e[r]()?.find(i=>i===+t):(console.error("[_shouldAdd] invalid resource, input:",r),!1)}})),K({onInit(e){let n=localStorage.getItem(w);if(n){let o=JSON.parse(n);a(e,{books:o.books||[],houses:o.houses||[],characters:o.characters||[]})}else{let o={books:[],houses:[],characters:[]};localStorage.setItem(w,JSON.stringify(o)),a(e,{books:[],houses:[],characters:[]})}q(()=>{let o=Z(e),s={books:o.books,houses:o.houses,characters:o.characters};localStorage.setItem(w,JSON.stringify(s))})}}));var ce=e=>({path:!0,"path--checked":e}),S=class e{checked=l(!1);static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-svg-star"]],inputs:{checked:[1,"checked"]},decls:2,vars:3,consts:[["xmlns","http://www.w3.org/2000/svg","width","100%","height","100%","viewBox","0 0 24 24","fill","none",3,"ngClass"],["d","M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"]],template:function(o,s){o&1&&(B(),u(0,"svg",0),h(1,"path",1),d()),o&2&&v("ngClass",x(1,ce,s.checked()))},dependencies:[G,J],styles:[".path[_ngcontent-%COMP%]{stroke:#101828;fill:#fff}.path[_ngcontent-%COMP%]:hover{stroke:#feb273;fill:#fff}.path--checked[_ngcontent-%COMP%], .path--checked[_ngcontent-%COMP%]:hover{stroke:#feb273;fill:#feb273}"]})};var le=(e,n)=>({fontSize:e,minWidth:n}),pe=e=>({fontSize:e});function de(e,n){if(e&1&&(u(0,"div",4)(1,"p",6),_(2),d(),u(3,"p",7),_(4),d()()),e&2){let o=n.$implicit,s=k();p(),F(V(6,le,s.fontSize(),s.labelMinWidth())),p(),L(" ",o.key," "),p(),F(x(9,pe,s.fontSize())),p(),L(" ",o.val," ")}}function me(e,n){if(e&1){let o=R();u(0,"div",8),W("click",function(r){O(o);let t=k();return T(t.onFavClick(r))}),h(1,"app-com-svg-star",9),d()}if(e&2){let o=k();p(),v("checked",o.favoritesStore.isFavored(o.metaData().resource,o.metaData().resourceId))}}var ie=class e{favoritesStore=g(ne);card=l();header=l();redirectTo=l();fontSize=l("18px");labelMinWidth=l("0");disableFavorite=l(!1);metaData=j(()=>{if(!this.redirectTo())return{resource:"",resourceId:0};let n=this.redirectTo()?.split("/")||[];return n.length!==3?{resource:"",resourceId:0}:{resource:n[1],resourceId:+n[2]}});onFavClick(n){if(n.stopPropagation(),n.preventDefault(),!this.redirectTo()){console.error("redirectTo is empty");return}let o=this.redirectTo()?.replace("/","");if(!o){console.error("onFavClick: path is not valid, input: ",this.redirectTo());return}this.favoritesStore.updateFavorites(o)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=f({type:e,selectors:[["app-com-card-basic"]],inputs:{card:[1,"card"],header:[1,"header"],redirectTo:[1,"redirectTo"],fontSize:[1,"fontSize"],labelMinWidth:[1,"labelMinWidth"],disableFavorite:[1,"disableFavorite"]},decls:9,vars:3,consts:[[1,"link",3,"routerLink"],[1,"card"],[1,"card__header"],[1,"card__data"],[1,"card__row"],[1,"fav"],[1,"card__label"],[1,"card__value"],[1,"fav",3,"click"],[3,"checked"]],template:function(o,s){o&1&&(u(0,"a",0)(1,"div",1)(2,"div")(3,"h3",2),_(4),d(),u(5,"div",3),N(6,de,5,11,"div",4,I),d()(),E(8,me,2,1,"div",5),d()()),o&2&&(v("routerLink",s.redirectTo()),p(4),H(s.header()),p(2),A(s.card()),p(2),z(s.disableFavorite()?-1:8))},dependencies:[Y,S],styles:[".link[_ngcontent-%COMP%]{text-decoration:none;color:#000;-webkit-user-select:text;user-select:text}.card[_ngcontent-%COMP%]{width:328px;padding:20px;min-height:200px;border-radius:16px;position:relative;cursor:pointer;box-shadow:0 0 12px #00000026}.card[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #000}.card__data[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.card__row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px}.card__label[_ngcontent-%COMP%], .card__value[_ngcontent-%COMP%]{font-size:18px}.card__header[_ngcontent-%COMP%]{font-weight:600;font-size:24px;text-align:center;margin-bottom:16px;min-height:56px}.fav[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:0;right:0;width:36px;height:36px}"]})};export{S as a,ne as b,ie as c,oe as d,re as e};
